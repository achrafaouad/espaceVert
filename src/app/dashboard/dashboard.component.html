

  
     <div class="be">

      <div id="mapWrap" style="width: 100%; height: 100vh">
  
        <div
          id="mapPrev"
          class="mapPrev"
          style="width: 100%; height: 100vh"
        >

        <div class="draw" id="draw" style="margin-top:60px;margin-left:86%;border:0 0;border-radius:10px;box-shadow:2px 2px 10px black">
          <input type="text" placeholder="chercher un espace vert" (input)="onSearch($event)" class="form-control">

        </div>
        <div class="draw" id="draw" style="margin-top:60px" title="Ajouer un fuite">
          <button type="button" id="pkdpkf" class="myButton" style="margin:10px;" [class.clicked]="addFuite" (click)="addFuite = !addFuite"
            ><i class="bi bi-cursor-fill"></i></button>
        </div>


        <div class="draw" id="draw" style="margin-top:90px" title="Editer un fuite">
          <button type="button" id="pkdpkf" class="myButton" style="margin:10px;" [class.clicked]="editFuite" (click)="editFuite = !editFuite"
            ><i class="bi bi-pen"></i></button>
        </div>

        <div class="draw" id="draw" style="margin-top:120px" title="Editer un fuite">
          <button type="button" id="pkdpkf" class="myButton" style="margin:10px;" [class.clicked]="showInfo" (click)="showInfo = !showInfo"
            ><i class="bi bi-info-circle"></i></button>
        </div>

        <div class="draw" id="draw" style="margin-top:150px" title="Editer un fuite">
          <button type="button" id="pkdpkf" class="myButton" style="margin:10px;" [class.clicked]="removeSite" (click)="removeSite = !removeSite"
            ><i class="bi bi-trash3-fill"></i></button>
        </div>

        <div class="draw" id="draw" style="margin-top:180px">
          <button type="button" id="pkdpkf" class="myButton" style="margin:10px" (click)="changto('Polygon')"
            ><i class="bi bi-hexagon"></i></button>
        </div>



        <div class="draw" id="draw" style="margin-top:210px">
          <button type="button" id="pkdpkf" class="myButton" style="margin:10px;background-color:rgb(124, 231, 124)" (click)="draw.removeLastPoint();"
            ><i class="bi bi-arrow-counterclockwise"></i></button>
        </div>
        <div class="draw" id="draw" style="margin-top:240px">
          <button type="button" id="pkdpkf" class="myButton" style="margin:10px;background-color:rgb(242, 117, 117)" (click)="changto('None')"
            ><i class="bi bi-x"></i></button>
        </div>



      </div>
      </div>

     </div>
             

       


<div id="popup" class="ol-popup">
  <a href="javascript: void(0);" id="popup-closer" class="ol-popup-closer"></a>
  <div id="popup-content"></div>
</div>
<div #buttonContainer></div>

<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 *ngIf="addFuite" class="modal-title fs-5" id="staticBackdropLabel">Ajouter un Nouveau Fuite</h1>
                    <h1  *ngIf="!addFuite && editFuite" class="modal-title fs-5" id="staticBackdropLabel">Ajouter un Nouveau Fuite</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  <div class="row">
                    <div class="col-md-6">
                      <div class="form-group">
                        <label>Date du constat:</label>
                        <input type="date" class="form-control" [(ngModel)]="fuite.date_constat" [ngModel]="fuite.date_constat | date:'yyyy-MM-dd'">
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="form-group">
                        <label>Type de réseau:</label>
                        <select class="form-control" [(ngModel)]="fuite.type_reseau" >
                          
                          <option value="rédal">Réseau Rédal</option>
                          <option value="intérne">Réseau Intérne</option>
                        </select>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-6">
                      <div class="form-group">
                        <label>Localisation de la fuite (coordonnées GPS):</label>

                        <div class="form-group">
                          <label>Latitude:</label>
                          <input type="number" class="form-control" [(ngModel)]="fuite.latitude" >
                        </div>
                        <div class="form-group">
                          <label>Longitude:</label>
                          <input type="number" class="form-control" [(ngModel)]="fuite.longitude" >
                        </div>

                        
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="form-group">
                        <label>Statut:</label>
                        <select class="form-control"  [(ngModel)]="fuite.statut" >
                          <option value="en_cours">En Cours</option>
                          <option value="réparée">Réparée</option>
                        </select>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-6">
                      <div class="form-group">
                        <label>Date de la réparation:</label>
                        <input type="date" class="form-control" (change)="calculatedates()"  [(ngModel)]="fuite.date_reparation" [ngModel]="fuite.date_reparation | date:'yyyy-MM-dd'">
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="form-group">
                        <label>Délais de la réparation (jrs):</label>
                        <input type="number" class="form-control" [(ngModel)]="fuite.delais_reparation" >
                      </div>
                    </div>
                  </div>
                  <div class="form-group">
                    <label>Type de fuite:</label>
                    <select class="form-control" [(ngModel)]="fuite.type_fuite">
                      <option value="Fuite 1">Fuite 1</option>
                      <option value="Fuite 2">Fuite 2</option>
                      <!-- Add more options as needed -->
                    </select>
                  </div>

                  <button  *ngIf="addFuite" class="btn" (click)="sauvgarderFuite()"> sauvgarder </button>
                  <button  *ngIf="!addFuite && editFuite" class="btn" (click)="updateFuite()"> mise à jour </button>
                </div>
            </div>
        </div>
    </div>



    <div class="modal fade" id="addSpace" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="addEspace">Ajouter un Nouveau site</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="row">
                  <form #espacevertForm="ngForm">
                    <div class="form-group">
                      <label for="name">Nom:</label>
                      <input class="form-control" type="text" id="name" name="name" ngModel required>
                      <div *ngIf="espacevertForm.controls['name'].invalid && (espacevertForm.controls['name'].dirty || espacevertForm.controls['name'].touched)" class="text-danger">
                        Le nom est requis.
                      </div>
                    </div>
                  
                    <div class="form-group">
                      <label for="description">Description:</label>
                      <input class="form-control" type="text" id="surface" name="description" ngModel required >
                      <div *ngIf="espacevertForm.controls['description'].invalid && (espacevertForm.controls['description'].dirty || espacevertForm.controls['description'].touched)" class="text-danger">
                        La description est requis.             </div>
                    </div>
                    <div class="form-group">
                      <label for="id_spaceV">Espace Vert:</label>
                      <select aria-label="Default select example" class="form-select" id="id_spaceV" ngModel required  name="id_spaceV" (change)="espaceSelected($event)">
                        <option [value]="ele.id" *ngFor="let ele of espaces">{{ele.designation}}</option>
                      </select>
                      <div *ngIf="espacevertForm.controls['id_spaceV'].invalid && (espacevertForm.controls['id_spaceV'].dirty || espacevertForm.controls['id_spaceV'].touched)" class="text-danger">
                        L'Espace Vert est requis.
                      </div>
                    </div>
                  
                  
                   <br>
                  </form>
                
                  <div class="d-flex justify-content-center">

                    <button type="button"  class="btn btn-secondary" data-bs-dismiss="modal" >Fermer</button>
                    <button type="button" class="btn btn-primary"  data-bs-dismiss="modal"  type="submit" [disabled]="espacevertForm.invalid"  (click)="onSubmit(espacevertForm)">Ajouter</button>
                 

                  </div>
    
          
       
                   
         
            </div>
        </div>
    </div>
</div>
</div>


    <div class="modal fade" id="askuser" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <div class="d-flex justify-content-center">
                <img src="{{image}}/assets/attention.png" width="45px">
                <h4>Un de Vos sites sera suprimé , Etes vous sur? </h4>
              </div>
              <div class="d-flex justify-content-center">

                <button type="button"  class="btn btn-secondary" data-bs-dismiss="modal" >Non</button>
                <button type="button" class="btn btn-primary"  data-bs-dismiss="modal" (click)="deleteSiteFromEspace()">Oui</button>
             

              </div>
                
        </div>
    </div>
</div>
</div>



<router-outlet></router-outlet>

